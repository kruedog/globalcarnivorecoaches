<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Visitor Dashboard • Global Carnivore Coaches</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" type="image/png" href="/images/earth_steak.png">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<!-- Dashboard Styles -->
<link rel="stylesheet" href="/css/dashboard.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
<div class="wrap">

  <header>
    <div>
      <h1>Visitor Dashboard</h1>
      <p>Live analytics — visible only to logged-in coaches.</p>
      <span class="badge" id="userBadge"></span>
      <div id="updateTime"></div>
      <div id="refreshStatus">Refreshing…</div>
    </div>
    <div>
      <a href="/profile.html" class="header-link">← Back to Profile</a>
    </div>
  </header>

  <!-- TAB BAR -->
  <nav class="tab-bar">
    <button class="tab-btn active" data-tab="overview">Overview</button>
    <button class="tab-btn" data-tab="engagement">Engagement</button>
    <button class="tab-btn" data-tab="leads">Leads</button>
    <button class="tab-btn" data-tab="devices">Devices</button>
    <button class="tab-btn" data-tab="geography">Geography</button>
  </nav>

  <!-- =============================
       OVERVIEW TAB
       ============================= -->
  <section class="tab-panel" data-panel="overview">
    <div class="cards">
      <div class="card"><h2>Today’s Visits</h2><div class="big-num" id="statToday">–</div></div>
      <div class="card"><h2>Last 7 Days</h2><div class="big-num" id="statWeek">–</div></div>
      <div class="card"><h2>All-Time Visits</h2><div class="big-num" id="statTotal">–</div></div>
      <div class="card"><h2>All-Time Profile Views</h2><div class="big-num" id="statProfileTotal">–</div></div>
    </div>

    <div class="card chart-wrap">
      <h2>Visitor Activity • Last 14 Days</h2>
      <div class="chart-inner"><canvas id="visitsChart"></canvas></div>
    </div>

    <div class="card chart-wrap">
      <h2>Profile Views • Last 14 Days</h2>
      <div class="chart-inner"><canvas id="profileChart"></canvas></div>
    </div>

    <div class="card">
      <h2>Top Coaches (Total Views)</h2>
      <div class="leader-list" id="leaderList"></div>
    </div>

    <div class="card">
      <h2>Visitor Locations</h2>
      <div class="locations-list" id="locationList"></div>
      <div id="dashStatus" class="status"></div>
    </div>
  </section>

  <!-- =============================
       ENGAGEMENT TAB
       ============================= -->
  <section class="tab-panel hidden" data-panel="engagement">
    <div class="cards">
      <div class="card">
        <div class="subheading">Return Visitors</div>
        <div class="kpi-label">Today</div><div class="kpi-value" id="engReturnToday">–</div>
        <div class="kpi-label">Last 7 days</div><div class="kpi-value" id="engReturnWeek">–</div>
        <div class="kpi-label">Return rate</div><div class="kpi-value" id="engReturnRate">–</div>
      </div>

      <div class="card">
        <div class="subheading">Session Duration Mix</div>
        <ul class="list-plain">
          <li><span>Quick visits (0–10s)</span><span id="engDurShort">–</span></li>
          <li><span>Browsers (10–30s)</span><span id="engDurMed">–</span></li>
          <li><span>Deep reads (30s+)</span><span id="engDurLong">–</span></li>
        </ul>
      </div>

      <div class="card">
        <div class="subheading">Top Pages</div>
        <ul class="list-plain" id="engTopPages"></ul>
      </div>
    </div>

    <div class="card chart-wrap">
      <h2>Hourly Activity</h2>
      <div class="chart-inner"><canvas id="hourlyChart"></canvas></div>
      <div id="engagementStatus" class="status"></div>
    </div>
  </section>

  <!-- =============================
       LEADS TAB
       ============================= -->
  <section class="tab-panel hidden" data-panel="leads">
    <div class="cards">
      <div class="card">
        <div class="subheading">Contact Intent</div>
        <div class="kpi-label">Today</div><div class="kpi-value" id="leadsContactToday">–</div>
        <div class="kpi-label">Last 7 days</div><div class="kpi-value" id="leadsContactWeek">–</div>
      </div>

      <div class="card">
        <div class="subheading">Lead Quality Index</div>
        <div class="kpi-value" id="leadsScoreToday">–</div>
        <div class="kpi-delta" id="leadsScoreDelta"></div>
      </div>

      <div class="card">
        <div class="subheading">Engagement Funnel</div>
        <ul class="list-plain">
          <li><span>Profile views</span><span id="funnelViews">–</span></li>
          <li><span>Scrolled > 50%</span><span id="funnelScrolled">–</span></li>
          <li><span>Contact opens</span><span id="funnelContact">–</span></li>
        </ul>
      </div>
    </div>

    <div class="card">
      <h2>Weekly Lead Summary</h2>
      <div id="leadsSummaryText" class="text-muted">Waiting for data…</div>
      <div id="leadsStatus" class="status"></div>
    </div>
  </section>

  <!-- =============================
       DEVICES TAB
       ============================= -->
  <section class="tab-panel hidden" data-panel="devices">
    <div class="cards">
      <div class="card chart-wrap">
        <h2>Device Types</h2>
        <div class="chart-inner"><canvas id="deviceChart"></canvas></div>
      </div>
      <div class="card chart-wrap">
        <h2>Browsers</h2>
        <div class="chart-inner"><canvas id="browserChart"></canvas></div>
      </div>
      <div class="card chart-wrap">
        <h2>Operating Systems</h2>
        <div class="chart-inner"><canvas id="osChart"></canvas></div>
      </div>
    </div>
    <div id="devicesStatus" class="status"></div>
  </section>

  <!-- =============================
       GEOGRAPHY TAB
       ============================= -->
  <section class="tab-panel hidden" data-panel="geography">
    <div class="cards">
      <div class="card">
        <h2>World View</h2>
        <div class="map-placeholder">World heatmap coming soon</div>
      </div>
      <div class="card">
        <h2>Top Countries</h2>
        <ul class="list-plain" id="geoTopCountries"></ul>
      </div>
      <div class="card">
        <h2>Regional Trends</h2>
        <div id="geoTrendText" class="text-muted"></div>
      </div>
    </div>
    <div id="geoStatus" class="status"></div>
  </section>

</div>

<!-- JS (extracted) -->
<script src="/js/dashboard.js"></script>

</body>
</html>
