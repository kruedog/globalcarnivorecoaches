<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Global Carnivore Coaches | Durability. Focus. Freedom.</title>
  <link rel="icon" type="image/png" href="images/earth_steak.png">

  <!-- Global CSS -->
  <link rel="stylesheet" href="css/global.css" />
</head>

<body>
  <!-- NAV Section -->
  <nav class="top-nav" aria-label="Main Navigation">
    <div class="wrap nav-inner" style="padding:0;">
      <div class="nav-left">
        <a class="brand-mini" href="#about" aria-label="Global Carnivore Coaches home">
          <img src="images/earth_steak.png" alt="Global Carnivore Coaches logo" onerror="this.style.display='none'">
          <span>Global Carnivore Coaches</span>
        </a>
      </div>
      <div class="nav-right" role="navigation" aria-label="Site links">
        <a href="#services" class="nav-link">Programs</a>
        <a href="#about" class="nav-link">About</a>
        <a href="science.html" class="nav-link">Science</a>
        <a href="#mealideas" class="nav-link">Gallery</a>
        <a href="#contact" class="nav-link">Contact</a>
        <a href="webapi/login.html" class="nav-link">Coach Login</a>
      </div>
    </div>
  </nav>

  <main class="wrap" id="maincontent">

    <!-- HERO Section -->
    <header class="hero" role="banner" aria-labelledby="hero-title">
      <div class="hero-left" aria-hidden="true">
        <div class="logo" title="Global Carnivore Coaches">
          <img src="images/earth_steak.png" alt="Planet Earth and Ribeye Steak">
        </div>
      </div>
      <div>
        <h1 id="hero-title">Global Carnivore Coaches</h1>
        <p class="tag">Eat a primal Diet. Feel like a primal Human.</p>
        <p class="lead-hero">
          Active enrollment — straightforward, evidence-minded carnivore coaching for durability, focus, and long-range endurance.
          Includes guidance on fasting, rucking, and recovery.
        </p>
      </div>
    </header>

    <!-- SERVICES Section -->
    <section class="card" id="services" aria-labelledby="services-title">
      <div class="cols">
        <div>
          <h2 id="services-title">
            Core Programs: Transformation Blueprint
            <span class="subline">Unleash • Optimize • Thrive</span>
          </h2>
          <p class="lead">
            Reclaim your vitality with 30, 60, or 90-day coaching programs tailored to guide you from keto to the Lion Diet.
            Crush inflammation, sharpen focus, and build resilience with personalized nutrition, bi-weekly video calls, daily email or chat support,
            and curated recipes like ribeyes and meatzzas.
          </p>
          <div class="benefits" style="margin-top:8px;">
            <div class="benefit"><strong>Tailored Journey</strong><div>Personalized plans evolve from keto to Lion Diet.</div></div>
            <div class="benefit"><strong>Resilient Body</strong><div>Eliminate inflammation & chronic pain.</div></div>
            <div class="benefit"><strong>Steady Energy</strong><div>Deep ketosis fuels focus & stamina.</div></div>
            <div class="benefit"><strong>Constant Support</strong><div>Bi-weekly calls + daily messaging.</div></div>
            <div class="benefit"><strong>Simple Fuel</strong><div>Ribeyes, bacon, meatzza — effortless eating.</div></div>
          </div>
        </div>

        <aside class="card-aside" aria-labelledby="mission-title">
          <div id="mission-title" style="font-weight:800; margin-bottom:10px; color:var(--text-color);">Mission Focus</div>
          <ul style="padding-left:18px; margin:0; color:var(--muted); font-weight:600;">
            <li>System Reset — gut & digestion</li>
            <li>Inflammation mitigation</li>
            <li>Metabolic optimization</li>
            <li>Energy & focus restoration</li>
            <li>Personalized accountability</li>
          </ul>
        </aside>
      </div>
    </section>

    <div class="divider"></div>

    <!-- ABOUT / COACHES Section -->
    <section class="card" id="about">
      <h2>
        Meet the Coaches
        <span class="subline">Certified. Battle-Tested. Yours.</span>
      </h2>
      <p class="lead">
        These coaches have walked the carnivore path — through adaptation, plateaus, and triumphs.
      </p>

      <div class="cols">
        <div class="gallery" id="coachGallery">
          <!-- Dynamic coach cards will be injected here -->
        </div>
        <aside class="card-aside">
          <h3>How It Works</h3>
          <ol>
            <li>Discovery call</li>
            <li>Custom blueprint</li>
            <li>Track wins weekly</li>
            <li>Thrive for life</li>
          </ol>
          <p><a href="contact.html" style="color: var(--accent-red);">Start Today →</a></p>
        </aside>
      </div>
    </section>

    <div class="divider"></div>

    <!-- SHARED MEAL IDEAS Section -->
    <section class="card" id="mealideas" aria-labelledby="cache-title">
      <h2 id="cache-title">
        Shared Meal Ideas
        <span class="subline">Inspiration for sustained performance</span>
      </h2>
      <p class="lead" style="margin-top:8px;">
        Click any image to open a larger view.
      </p>

      <div class="gallery" aria-live="polite" aria-label="Ration images">
        <a class="tile" href="#img-1"><img src="images/meatzza.jpg"><div class="caption">Meatzza Bomb</div></a>
        <a class="tile" href="#img-2"><img src="images/image004.jpg"><div class="caption">Beef Haunches</div></a>
        <a class="tile" href="#img-3"><img src="images/image005.jpg"><div class="caption">Haunches 2</div></a>
        <a class="tile" href="#img-4"><img src="images/image008.jpg"><div class="caption">Smoked Trout</div></a>
        <a class="tile" href="#img-5"><img src="images/image011.jpg"><div class="caption">Simple Plate</div></a>
        <a class="tile" href="#img-new1"><img src="images/image001.jpg"><div class="caption">Field Brisket 1</div></a>
        <a class="tile" href="#img-new2"><img src="images/image002.jpg"><div class="caption">Field Brisket 2</div></a>
        <a class="tile" href="#img-new3"><img src="images/image003.jpg"><div class="caption">Meat Platter</div></a>
        <a class="tile" href="#img-new4"><img src="images/image006.jpg"><div class="caption">Pepper Bark</div></a>
        <a class="tile" href="#img-new5"><img src="images/image007.jpg"><div class="caption">Brisket Point</div></a>
        <a class="tile" href="#img-new6"><img src="images/image009.jpg"><div class="caption">Slice Ring</div></a>
        <a class="tile" href="#img-new7"><img src="images/image010.jpg"><div class="caption">Brisket Plate</div></a>
      </div>

    </section>

    <div class="divider"></div>

    <!-- GK: PART 1 END MARKER -->
    <!-- FOOD GROUPS Section -->
    <section class="card" id="foodgroups" aria-labelledby="foodgroups-title">
      <h2 id="foodgroups-title">
        Core Food Groups
        <span class="subline">Fuel Your Inner Beast</span>
      </h2>
      <p class="lead">
        Unleash your primal power with the carnivore diet’s four savage food groups—ruminant, non-ruminant, dairy, and fish and seafood.
        These are your weapons: pure, nutrient-dense fuel to crush weakness, sharpen focus, and forge an unbreakable body, free from plant-based baggage.
      </p>
      <div class="benefits" style="margin-top:8px;">
        <div class="benefit">
          <strong>Ruminant</strong>
          <div>
            Beef, lamb, bison—raw, untamed strength. Loaded with heme iron, B12, and CLA, they sculpt muscle and spark ketosis.
            Devour dripping ribeye or smoky brisket to fuel your conquests.
          </div>
        </div>
        <div class="benefit">
          <strong>Non-Ruminant</strong>
          <div>
            Pork, chicken, turkey—fierce, adaptable allies. Brimming with protein and B vitamins, they rebuild tissue and sustain your hunt.
            Seize fatty bacon to keep the ketogenic flames roaring.
          </div>
        </div>
        <div class="benefit">
          <strong>Dairy</strong>
          <div>
            Butter, cream, hard cheeses—rich, primal elixirs. Packed with calcium and K2, they harden bones and power ketosis.
            Choose low-lactose warriors for a gut that fights back.
          </div>
        </div>
        <div class="benefit">
          <strong>Fish &amp; Seafood</strong>
          <div>
            Salmon, shrimp, crab—ocean’s ruthless bounty. Surging with omega-3s and selenium, they hone your mind and guard your heart.
            Hunt wild-caught to dominate with peak vitality.
          </div>
        </div>
      </div>
      <p style="font-size:.95rem; color:var(--muted); margin-top:12px;">
        Track down the finest—grass-fed, wild-caught—for unstoppable power. Enlist a coach to hone your rations and slay your goals.
      </p>
    </section>

    <div class="divider" role="separator" aria-hidden="true"></div>

    <!-- SCIENCE Section -->
    <section class="card" id="mechanisms">
      <h2>
        The Science of Transformation
        <span class="subline">Biology-informed, field-tested</span>
      </h2>
      <p class="lead">
        The carnivore diet optimizes metabolism and reduces inflammation by removing plant toxins and focusing on high-bioavailability nutrients — backed by
        growing case studies and clinical observations. Learn how ketones, autophagy, and hormonal balance stack in your favor.
      </p>
      <div class="cta" style="margin-top:12px;">
        <a class="btn" href="science.html">Explore the Science →</a>
      </div>
    </section>

    <div class="divider" role="separator" aria-hidden="true"></div>

    <!-- FASTING & MOVEMENT Section -->
    <section class="card" id="fasting-movement" aria-labelledby="fasting-movement-title">
      <h2 id="fasting-movement-title">
        Fasting &amp; Movement Strategy
        <span class="subline">Autophagy • Ruck • Recover • Resilience</span>
      </h2>
      <p class="lead">
        Use fasting strategically to accelerate repair and metabolic flexibility. Combine with low-impact load carriage (rucking)
        and targeted mobility to improve resilience and function. Programs emphasize consistent, sustainable movement patterns, joint-first strength,
        and mobility drills that keep you active and pain-managed over the long term.
      </p>
    </section>

    <div class="divider" role="separator" aria-hidden="true"></div>

    <!-- COMMUNITY Section -->
    <section class="card" id="community">
      <h2>
        Community &amp; Resources
        <span class="subline">Trusted Voices &amp; Learning</span>
      </h2>
      <p class="lead">
        Join a tribe of people getting stronger, sharper, and healthier through a meat-based lifestyle.
        Learn from trusted leaders, coaches, and real success stories.
      </p>
      <div class="cta" style="margin-top:12px;">
        <a class="btn" href="community.html">Explore Community →</a>
      </div>
    </section>

    <div class="divider" role="separator" aria-hidden="true"></div>

    <!-- CONTACT Section -->
    <section class="card" id="contact" aria-labelledby="contact-title">
      <h2 id="contact-title">
        Mobilize Your Transformation
        <span class="subline">Deploy your plan</span>
      </h2>
      <p class="lead">
        If you're ready to reclaim consistent energy, reduce chronic symptoms, and build sustainable performance,
        schedule a discovery call. We'll assess your current state, set clear goals, and craft a stepwise plan that fits your life.
      </p>
      <div class="cta" role="region" aria-label="Call to action">
        <a class="btn" href="mailto:your@email.com" role="button">Book Discovery Call</a>
        <a class="btn ghost" href="tiers.html" role="button">View Program Tiers</a>
      </div>
      <p style="text-align:center; color:var(--muted); margin-top:12px; font-weight:700;">
        Limited 1:1 coaching slots available — start today.
      </p>
    </section>

    <!-- Image Modals for meal gallery -->
    <div id="img-1" class="modal-target" aria-modal="true" role="dialog">
      <div class="modal-content" role="document" aria-labelledby="modal-1-title">
        <a href="#tile-1" class="modal-close" aria-label="Close image view">&times;</a>
        <img src="images/meatzza.jpg" alt="Large view of Meatzza Bomb">
      </div>
    </div>
    <div id="img-2" class="modal-target" aria-modal="true" role="dialog">
      <div class="modal-content">
        <a href="#tile-2" class="modal-close" aria-label="Close image view">&times;</a>
        <img src="images/image004.jpg" alt="Large view of slow-cooked beef haunches">
      </div>
    </div>
    <div id="img-3" class="modal-target" aria-modal="true" role="dialog">
      <div class="modal-content">
        <a href="#tile-3" class="modal-close" aria-label="Close image view">&times;</a>
        <img src="images/image005.jpg" alt="Large view of plated slow-forged beef haunches">
      </div>
    </div>
    <div id="img-4" class="modal-target" aria-modal="true" role="dialog">
      <div class="modal-content">
        <a href="#tile-4" class="modal-close" aria-label="Close image view">&times;</a>
        <img src="images/image008.jpg" alt="Large view of smoked trout fillet">
      </div>
    </div>
    <div id="img-5" class="modal-target" aria-modal="true" role="dialog">
      <div class="modal-content">
        <a href="#tile-5" class="modal-close" aria-label="Close image view">&times;</a>
        <img src="images/image011.jpg" alt="Large view of simple carnivore plate">
      </div>
    </div>
    <div id="img-new1" class="modal-target" aria-modal="true" role="dialog">
      <div class="modal-content">
        <a href="#tile-new1" class="modal-close" aria-label="Close image view">&times;</a>
        <img src="images/image001.jpg" alt="Large view of smoked brisket slices">
      </div>
    </div>
    <div id="img-new2" class="modal-target" aria-modal="true" role="dialog">
      <div class="modal-content">
        <a href="#tile-new2" class="modal-close" aria-label="Close image view">&times;</a>
        <img src="images/image002.jpg" alt="Large view of brisket pile">
      </div>
    </div>
    <div id="img-new3" class="modal-target" aria-modal="true" role="dialog">
      <div class="modal-content">
        <a href="#tile-new3" class="modal-close" aria-label="Close image view">&times;</a>
        <img src="images/image003.jpg" alt="Large view of meat platter">
      </div>
    </div>
    <div id="img-new4" class="modal-target" aria-modal="true" role="dialog">
      <div class="modal-content">
        <a href="#tile-new4" class="modal-close" aria-label="Close image view">&times;</a>
        <img src="images/image006.jpg" alt="Large view of brisket with pepper bark">
      </div>
    </div>
    <div id="img-new5" class="modal-target" aria-modal="true" role="dialog">
      <div class="modal-content">
        <a href="#tile-new5" class="modal-close" aria-label="Close image view">&times;</a>
        <img src="images/image007.jpg" alt="Large view of brisket point">
      </div>
    </div>
    <div id="img-new6" class="modal-target" aria-modal="true" role="dialog">
      <div class="modal-content">
        <a href="#tile-new6" class="modal-close" aria-label="Close image view">&times;</a>
        <img src="images/image009.jpg" alt="Large view of brisket being sliced">
      </div>
    </div>
    <div id="img-new7" class="modal-target" aria-modal="true" role="dialog">
      <div class="modal-content">
        <a href="#tile-new7" class="modal-close" aria-label="Close image view">&times;</a>
        <img src="images/image010.jpg" alt="Large view of brisket plate">
      </div>
    </div>

    <!-- Certificate modal (static example) -->
    <div id="img-cert" class="modal-target" aria-modal="true" role="dialog">
      <div class="modal-content">
        <a href="#tile-cert" class="modal-close" aria-label="Close certificate view">&times;</a>
        <img src="images/toon_cert.jpg" alt="Large view of Kiltz Health Coaching Certificate">
      </div>
    </div>

    <!-- Public Profile Modal (Option A layout) -->
    <div id="publicProfileModal" class="modal">
      <div class="modal-shell">
        <button class="modal-close" id="closeModal" aria-label="Close profile modal">&times;</button>

        <div class="modal-header">
          <h2 id="modalName">Coach Name</h2>
          <p><a id="modalEmail"></a></p>
          <div class="profile-avatar">
            <img id="modalProfilePic" src="images/earth_steak.png" alt="Coach profile photo">
          </div>
        </div>

        <div class="modal-body">
          <div>
            <div class="bio-box" id="modalBio"></div>
            <div class="before-after" id="beforeAfterContainer"></div>
          </div>
          <div>
            <div class="specialization-box">
              <h3>I Specialize In</h3>
              <ul id="specList"></ul>
            </div>
            <div id="certificateContainer"></div>
          </div>
        </div>

        <button class="book-btn" id="bookCoach">Book This Coach</button>
      </div>
    </div>

  </main>
  <footer>
    <p>&copy; 2025 Global Carnivore Coaches. All rights reserved.</p>
  </footer>

  <script>
    // === CONFIG ===
    const COACHES_JSON_URL = "https://globalcarnivorecoaches.onrender.com/uploads/coaches.json";

    // Normalize uploads path: ensures "/uploads/filename"
    function fixPath(p) {
      if (!p) return "";
      return "/uploads/" + String(p)
        .replace(/^https?:\/\/[^/]+\/+/i, "")   // strip host if accidentally stored
        .replace(/^\/?uploads\/+/i, "")        // strip leading uploads/
        .replace(/^public\/+/i, "");           // strip public/
    }

    // Specializations: array or string-safe
    function getSpecs(raw) {
      if (!raw) return [];
      if (Array.isArray(raw)) return raw;
      return String(raw)
        .split(/[;,|]/)
        .map(s => s.trim())
        .filter(Boolean);
    }

    // Load coaches from static JSON
    async function loadCoaches() {
      try {
        const res = await fetch(COACHES_JSON_URL, { cache: "no-store" });
        const data = await res.json();

        const gallery = document.getElementById("coachGallery");
        if (!gallery) return;

        gallery.innerHTML = "";

        data.forEach(coach => {
          const files = coach.Files || {};
          const profileImg =
            fixPath(files.Profile) || "images/WolfCoach_Profile.png";

          const card = document.createElement("div");
          card.className = "coach-card";

          card.innerHTML = `
            <a href="#" class="tile coach-tile" aria-label="View ${coach.CoachName || coach.Username || "coach"}">
              <img src="${profileImg}" alt="${coach.CoachName || coach.Username || "Coach"}">
            </a>
            <button type="button" class="view-btn">
              View Profile
            </button>
          `;

          const open = (evt) => {
            evt.preventDefault();
            openCoachModal(coach);
          };

          card.querySelector(".coach-tile").addEventListener("click", open);
          card.querySelector(".view-btn").addEventListener("click", open);

          gallery.appendChild(card);
        });

      } catch (err) {
        console.error("Error loading coaches.json:", err);
      }
    }

    // Open Public Profile Modal
    function openCoachModal(coach) {
      const files = coach.Files || {};

      // Name + email
      const name = coach.CoachName || coach.Username || "Coach";
      const email = coach.Email || "";

      document.getElementById("modalName").textContent = name;

      const emailEl = document.getElementById("modalEmail");
      emailEl.textContent = email;
      emailEl.href = email ? `mailto:${email}` : "#";

      // Profile image
      const profilePath = fixPath(files.Profile) || "images/WolfCoach_Profile.png";
      document.getElementById("modalProfilePic").src = profilePath;

      // Bio (newlines → <br>)
      const bio = coach.Bio || "";
      document.getElementById("modalBio").innerHTML =
        String(bio).replace(/\n/g, "<br>");

      // Before / After
      const baContainer = document.getElementById("beforeAfterContainer");
      baContainer.innerHTML = "";
      ["Before", "After"].forEach(key => {
        if (files[key]) {
          baContainer.innerHTML += `<img src="${fixPath(files[key])}" alt="${key} photo of ${name}">`;
        }
      });

      // Specializations
      const specs = getSpecs(coach.Specializations);
      const specList = document.getElementById("specList");
      specList.innerHTML = specs.map(s => `<li>${s}</li>`).join("");

      // Certificate
      const certBox = document.getElementById("certificateContainer");
      if (files.Certificate) {
        certBox.innerHTML = `<img src="${fixPath(files.Certificate)}" alt="Certificate for ${name}">`;
      } else {
        certBox.innerHTML = "";
      }

      // Book button
      document.getElementById("bookCoach").onclick = () => {
        if (email) window.location.href = `mailto:${email}`;
      };

      // Show modal
      document.getElementById("publicProfileModal").classList.add("show");
    }

    // Close modal
    document.getElementById("closeModal").addEventListener("click", () => {
      document.getElementById("publicProfileModal").classList.remove("show");
    });

    // Close modal with ESC
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        document.getElementById("publicProfileModal").classList.remove("show");
      }
    });

    // Optional: close when clicking backdrop
    document.getElementById("publicProfileModal").addEventListener("click", (e) => {
      if (e.target === e.currentTarget) {
        e.currentTarget.classList.remove("show");
      }
    });

    // Load coaches when DOM is ready
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", loadCoaches);
    } else {
      loadCoaches();
    }
  </script>
</body>
</html>
