<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Global Carnivore Coaches | Durability. Focus. Freedom.</title>
  <link rel="icon" type="image/png" href="images/earth_steak.png">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    /* === YOUR FULL ORIGINAL CSS FROM index.html === */
    :root { --white: #FFFFFF; --off-white: #E6E6E6; --parchment: #D0D2D5; --text-color: #192168; --primary-blue: #192168; --accent-red: #AF1E2D; --secondary-iron: #1A1A1A; --muted: #3A3A3A; --shadow: 0 10px 30px rgba(0,0,0,0.28); --max-width: 1100px; --radius: 8px; --glass: rgba(255,255,255,0.6); --accent-glow: 0 8px 30px rgba(175,30,45,0.18); }
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; font-family: "Inter", sans-serif; background: radial-gradient(circle at 10% 10%, #F5F6F8 0%, var(--parchment) 40%, #B8BBC2 100%); color: var(--text-color); line-height: 1.6; }
    body.modal-open { overflow: hidden; }
    .wrap { max-width: var(--max-width); margin: 0 auto; padding: 24px; }
    /* ... (keep ALL your original CSS exactly as-is) ... */
    /* Including .modal-target, .modal-content, .modal-close, .gallery, .tile, .cert-tile, etc. */
    /* YES — paste your ENTIRE <style> block from the original index.html here */
  </style>
</head>
<body>
  <nav class="top-nav" aria-label="Main Navigation">
    <div class="wrap nav-inner" style="padding:0;">
      <div class="nav-left">
        <a class="brand-mini" href="#about">
          <img src="images/earth_steak.png" alt="Logo">
          <span>Global Carnivore Coaches</span>
        </a>
      </div>
      <div class="nav-right">
        <a href="#services" class="nav-link">Programs</a>
        <a href="#about" class="nav-link">About</a>
        <a href="science.html" class="nav-link">Science</a>
        <a href="#mealideas" class="nav-link">Gallery</a>
        <a href="#contact" class="nav-link">Contact</a>
        <a href="webapi/login.html" class="nav-link">Coach Login</a>
      </div>
    </div>
  </nav>

  <main class="wrap" id="maincontent">
    <!-- HERO, SERVICES, etc. — unchanged -->
    <!-- ... all your existing sections ... -->

    <!-- Meal Ideas Gallery -->
    <section class="card" id="mealideas">
      <h2 id="cache-title">Shared Meal Ideas <span class="subline">Inspiration for sustained performance</span></h2>
      <p class="lead">Click any image to open a larger view.</p>
      <div class="gallery" id="mealGallery"></div>
    </section>

    <!-- Coach Gallery will be injected here -->
    <section class="card" id="coaches-section">
      <h2>Our Coaches</h2>
      <div class="gallery" id="coachGallery"></div>
    </section>

    <!-- All modals go here -->
    <div id="modalsContainer"></div>
  </main>

  <footer>&copy; 2025 Global Carnivore Coaches. All rights reserved.</footer>

  <!-- Shared modal logic -->
  <script src="js/modals.js"></script>

  <script>
    const mealImages = [
      { src: "images/meatzza.jpg", alt: "Meatzza Bomb", caption: "Meatzza Bomb" },
      { src: "images/image004.jpg", alt: "Beef Haunches", caption: "Beef Haunches" },
      { src: "images/image005.jpg", alt: "Beef Haunches 2", caption: "Beef Haunches 2" },
      { src: "images/image008.jpg", alt: "Smoked Trout", caption: "Smoked Trout" },
      { src: "images/image011.jpg", alt: "Simple Plate", caption: "Simple Plate" },
      { src: "images/image001.jpg", alt: "Field Brisket 1", caption: "Field Brisket 1" },
      { src: "images/image002.jpg", alt: "Field Brisket 2", caption: "Field Brisket 2" },
      { src: "images/image003.jpg", alt: "Field Brisket 3", caption: "Field Brisket 3" },
      { src: "images/image006.jpg", alt: "Brisket Slices", caption: "Brisket Slices" },
      { src: "images/image007.jpg", alt: "Brisket Point", caption: "Brisket Point" },
      { src: "images/image009.jpg", alt: "Slicing Brisket", caption: "Slicing Brisket" },
      { src: "images/image010.jpg", alt: "Brisket Plate", caption: "Brisket Plate" }
    ];

    async function loadMealModals() {
      const container = document.getElementById('modalsContainer');
      const gallery = document.getElementById('mealGallery');
      const template = await fetch('components/modal-image.html').then(r => r.text());

      mealImages.forEach((img, i) => {
        const id = `meal-${i}`;
        const tile = document.createElement('a');
        tile.className = 'tile';
        tile.href = `#${id}`;
        tile.innerHTML = `<img src="${img.src}" alt="${img.alt}" loading="lazy"><div class="caption">${img.caption}</div>`;
        gallery.appendChild(tile);

        const modal = template
          .replace('{{id}}', id)
          .replace('{{src}}', img.src)
          .replace('{{alt}}', `Large view: ${img.alt}`);
        container.insertAdjacentHTML('beforeend', modal);
      });
    }

    async function loadCoaches() {
      try {
        const res = await fetch('/webapi/get_coaches.php');
        const data = await res.json();
        if (!data.success) return;

        const gallery = document.getElementById('coachGallery');
        const container = document.getElementById('modalsContainer');
        const template = await fetch('components/modal-coach.html').then(r => r.text());

        for (const c of data.coaches) {
          const username = c.Username.toLowerCase();
          const name = c.CoachName || c.Username;
          const bio = (c.Bio || 'No bio yet.').replace(/\r?\n\r?\n/g, '</p><p>').replace(/\r?\n/g, '<br>');
          const files = c.Files || {};
          const profile = files.Profile ? `/webapi/${files.Profile}` : 'images/WolfCoach_Profile.png';
          const before = files.Before ? `/webapi/${files.Before}` : null;
          const after = files.After ? `/webapi/${files.After}` : profile;
          const cert = files.Certificate ? `/webapi/${files.Certificate}` : 'images/toon_cert.jpg';

          const tile = document.createElement('a');
          tile.className = 'tile';
          tile.href = `#coach-${username}`;
          tile.innerHTML = `<img src="${profile}" alt="${name}" loading="lazy"><div class="caption">${name}</div>`;
          gallery.appendChild(tile);

          const photos = before || after ? `
            <div class="photo-container">
              ${before ? `<img src="${before}" alt="${name} before" class="photo-old">` : ''}
              <img src="${after}" alt="${name} after" class="photo-new">
            </div>` : '';

          const modal = template
            .replace(/{{username}}/g, username)
            .replace('{{name}}', name)
            .replace('{{bio}}', `<p>${bio}</p>`)
            .replace('{{cert}}', cert)
            .replace('{{photos}}', photos);

          container.insertAdjacentHTML('beforeend', modal);
        }
      } catch (e) { console.error(e); }
    }

    loadMealModals();
    loadCoaches();
  </script>
</body>
</html>