<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Global Carnivore Coaches | Durability. Focus. Freedom.</title>
<link rel="icon" type="image/png" href="images/earth_steak.png">

<!-- Global stylesheet -->
<link rel="stylesheet" href="css/global.css">
</head>

<body>

<!-- NAV SECTION --------------------------------------------------- -->
<nav class="top-nav">
  <div class="wrap nav-inner">
    <a class="brand-mini" href="#about">
      <img src="images/earth_steak.png" alt="Earth Steak Logo">
      <span>Global Carnivore Coaches</span>
    </a>
    <div class="nav-right">
      <a href="#services" class="nav-link">Programs</a>
      <a href="#about" class="nav-link">About</a>
      <a href="science.html" class="nav-link">Science</a>
      <a href="#mealideas" class="nav-link">Gallery</a>
      <a href="#contact" class="nav-link">Contact</a>
      <a href="webapi/login.html" class="nav-link">Coach Login</a>
    </div>
  </div>
</nav>

<main class="wrap">

<!-- HERO ---------------------------------------------------------- -->
<header class="hero">
  <div class="hero-left">
    <div class="logo">
      <img src="images/earth_steak.png" alt="">
    </div>
  </div>
  <div>
    <h1>Global Carnivore Coaches</h1>
    <p class="tag">Eat primal. Feel primal.</p>
    <p class="lead-hero">
      Straightforward, evidence-minded carnivore coaching for durability, focus, and long-range endurance.
    </p>
  </div>
</header>

<!-- SERVICES ------------------------------------------------------ -->
<section class="card" id="services">
  <div class="cols">
    <div>
      <h2>Core Programs<span class="subline">Unleash • Optimize • Thrive</span></h2>
      <p class="lead">
        Reclaim your vitality with coaching tailored to guide you from keto to Lion Diet with rucking & fasting support.
      </p>
      <div class="benefits">
        <div class="benefit"><strong>Tailored Journey</strong><div>Personalized plans evolve from keto to Lion Diet.</div></div>
        <div class="benefit"><strong>Resilient Body</strong><div>Eliminate inflammation, pain & bloating.</div></div>
        <div class="benefit"><strong>Steady Energy</strong><div>Deep ketosis fuels focus & performance.</div></div>
        <div class="benefit"><strong>Constant Support</strong><div>Bi-weekly calls + daily accountability.</div></div>
      </div>
    </div>
    <aside class="card-aside">
      <strong>Mission Focus</strong>
      <ul>
        <li>Gut & Digestion Repair</li>
        <li>Inflammation Reduction</li>
        <li>Energy & Focus Restoration</li>
        <li>Metabolic Optimization</li>
      </ul>
    </aside>
  </div>
</section>

<div class="divider"></div>

<!-- COACHES ------------------------------------------------------- -->
<section class="card" id="about">
  <h2>Meet the Coaches<span class="subline">Certified • Battle-Tested</span></h2>
  <p class="lead">These coaches have walked the carnivore path…</p>
  <div class="cols">
    <div class="gallery" id="coachGallery"></div>
    <aside class="card-aside">
      <h3>How It Works</h3>
      <ol>
        <li>Discovery Call</li>
        <li>Custom Blueprint</li>
        <li>Track Wins</li>
        <li>Thrive For Life</li>
      </ol>
      <p><a href="#contact" style="color:var(--accent-red);">Start Today →</a></p>
    </aside>
  </div>
</section>

<div class="divider"></div>

<!-- MEAL IDEAS --------------------------------------------------- -->
<section class="card" id="mealideas">
  <h2>Shared Meal Ideas<span class="subline">Simple • Calorie-Dense</span></h2>
  <p class="lead">Click any image to open a larger view.</p>

  <div class="gallery">
    <!-- same gallery thumbnails as before… (unchanged) -->
    <a class="tile" href="#img-1"><img src="images/meatzza.jpg"><div class="caption">Meatzza Bomb</div></a>
    <a class="tile" href="#img-2"><img src="images/image004.jpg"><div class="caption">Beef Haunches</div></a>
    <a class="tile" href="#img-3"><img src="images/image005.jpg"><div class="caption">Haunches 2</div></a>
    <a class="tile" href="#img-4"><img src="images/image008.jpg"><div class="caption">Smoked Trout</div></a>
  </div>
</section>

<div class="divider"></div>

<!-- FASTING ------------------------------------------------------ -->
<section class="card" id="fasting-movement">
  <h2>Fasting & Movement<span class="subline">Autophagy • Ruck • Recover</span></h2>
  <p class="lead">Use fasting strategically…</p>
</section>

<div class="divider"></div>

<!-- COMMUNITY ---------------------------------------------------- -->
<section class="card" id="community">
  <h2>Community & Resources<span class="subline">Trusted Voices</span></h2>
  <p class="lead">Join a tribe getting stronger…</p>
  <div class="cta"><a class="btn" href="community.html">Explore Community →</a></div>
</section>

<div class="divider"></div>

<!-- CONTACT ------------------------------------------------------ -->
<section class="card" id="contact">
  <h2>Mobilize Your Transformation<span class="subline">Deploy Your Plan</span></h2>
  <p class="lead">Schedule a discovery call…</p>
  <div class="cta">
    <a class="btn" href="mailto:your@email.com">Book Call</a>
    <a class="btn ghost" href="tiers.html">Program Tiers</a>
  </div>
</section>

<!-- PUBLIC PROFILE MODAL ---------------------------------------- -->
<div id="publicProfileModal" class="modal">
  <div class="modal-shell">
    <button class="modal-close" id="closeModal">×</button>

    <div class="modal-header">
      <h2 id="modalName"></h2>
      <p><a id="modalEmail"></a></p>
      <div class="profile-avatar">
        <img id="modalProfilePic" src="images/earth_steak.png">
      </div>
    </div>

    <div class="modal-body">
      <div>
        <div class="bio-box" id="modalBio"></div>
        <div class="before-after" id="beforeAfterContainer"></div>
      </div>

      <div>
        <div class="specialization-box">
          <h3>Specializations</h3>
          <ul id="specList"></ul>
        </div>

        <div id="certificateContainer"></div>
      </div>
    </div>

    <button id="bookCoach" class="book-btn">Book This Coach</button>
  </div>
</div>

</main>

<footer>
  <p>&copy; 2025 Global Carnivore Coaches</p>
</footer>

<script>
// API endpoint
const API = "https://globalcarnivorecoaches.onrender.com/webapi/get_coaches.php";

// Normalize uploads path
function fixPath(p) {
  if (!p) return "";
  return "/uploads/" + p.replace(/^uploads\/+/,"").replace(/^public\/+/,"");
}

// Specialization safe-format (string or array or null)
function getSpecs(raw) {
  if (!raw) return [];
  if (Array.isArray(raw)) return raw;
  return String(raw)
    .split(/[;,|]/)
    .map(s => s.trim())
    .filter(Boolean);
}

// Load coaches
async function loadCoaches() {
  const res = await fetch(API, {cache:"no-store"});
  const data = await res.json();
  if (!data.success) return;

  const gallery = document.getElementById("coachGallery");
  gallery.innerHTML = "";

  data.coaches.forEach(coach => {
    const profile = fixPath(coach.Files?.Profile) || "images/WolfCoach_Profile.png";

    const card = document.createElement("div");
    card.className = "coach-card";
    card.innerHTML = `
      <a class="tile coach-tile"><img src="${profile}"></a>
      <button class="view-btn">View Profile</button>
    `;

    const open = () => openCoachModal(coach);
    card.querySelector(".tile").onclick = open;
    card.querySelector(".view-btn").onclick = open;

    gallery.appendChild(card);
  });
}

loadCoaches();

// Modal handler
function openCoachModal(coach) {
  document.getElementById("modalName").textContent = coach.CoachName || coach.Username;
  const email = coach.Email || "";
  document.getElementById("modalEmail").textContent = email;
  document.getElementById("modalEmail").href = email ? "mailto:" + email : "#";

  document.getElementById("modalProfilePic").src =
    fixPath(coach.Files?.Profile) || "images/WolfCoach_Profile.png";

  document.getElementById("modalBio").innerHTML =
    (coach.Bio || "").replace(/\n/g,"<br>");

  const BA = document.getElementById("beforeAfterContainer");
  BA.innerHTML = "";
  ["Before","After"].forEach(k => {
    if (coach.Files?.[k]) {
      BA.innerHTML += `<img src="${fixPath(coach.Files[k])}">`;
    }
  });

  const specs = getSpecs(coach.Specializations);
  const UL = document.getElementById("specList");
  UL.innerHTML = specs.map(s=>`<li>${s}</li>`).join("");

  const certBox = document.getElementById("certificateContainer");
  certBox.innerHTML = coach.Files?.Certificate
    ? `<img src="${fixPath(coach.Files.Certificate)}">`
    : "";

  document.getElementById("bookCoach").onclick = () => {
    if (email) location.href = "mailto:" + email;
  };

  document.getElementById("publicProfileModal").classList.add("show");
}

document.getElementById("closeModal").onclick = () =>
  document.getElementById("publicProfileModal").classList.remove("show");

</script>

</body>
</html>
